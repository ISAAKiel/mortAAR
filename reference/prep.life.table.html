<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Creates the input for the function life.table — prep.life.table • mortAAR</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creates the input for the function life.table — prep.life.table"><meta name="description" content="Prepares the input for life.table(). An individual based approach is supported as well
as already pooled data (e. g. from an already existing life table). In the latter case, the user
has to specify a numerical variable (dec) which defines the count for each age class.
If no life table exists, this function will process a dataframe including the age ranges of
individuals or groups of individuals to discrete the age classes. The age range is spread to
single years. agebeg has to be specified for the beginning of an age range, as well
as ageend for the end of an age range. If a data-set with year-known individuals is
used, ageend can be omitted but then the parameter agerange has to left on its
default value (included). The method defines in which way the single years between
the different age classes are split. If the data set comprises a grouping variable (e.g., sex),
this can be specified with group."><meta property="og:description" content="Prepares the input for life.table(). An individual based approach is supported as well
as already pooled data (e. g. from an already existing life table). In the latter case, the user
has to specify a numerical variable (dec) which defines the count for each age class.
If no life table exists, this function will process a dataframe including the age ranges of
individuals or groups of individuals to discrete the age classes. The age range is spread to
single years. agebeg has to be specified for the beginning of an age range, as well
as ageend for the end of an age range. If a data-set with year-known individuals is
used, ageend can be omitted but then the parameter agerange has to left on its
default value (included). The method defines in which way the single years between
the different age classes are split. If the data set comprises a grouping variable (e.g., sex),
this can be specified with group."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mortAAR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/mortAAR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/background.html">Background</a></li>
    <li><a class="dropdown-item" href="../articles/example_1.html">Example: Neolithic Gallery graves</a></li>
    <li><a class="dropdown-item" href="../articles/example_2.html">Example: European Iron Age</a></li>
    <li><a class="dropdown-item" href="../articles/lt_correction.html">Life table correction</a></li>
    <li><a class="dropdown-item" href="../articles/reproduction.html">Reproduction</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ISAAKiel/mortAAR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Creates the input for the function life.table</h1>
      <small class="dont-index">Source: <a href="https://github.com/ISAAKiel/mortAAR/blob/master/R/input_functions.R" class="external-link"><code>R/input_functions.R</code></a></small>
      <div class="d-none name"><code>prep.life.table.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Prepares the input for <code><a href="life.table.html">life.table()</a></code>. An individual based approach is supported as well
as already pooled data (e. g. from an already existing life table). In the latter case, the user
has to specify a numerical variable (<b>dec</b>) which defines the count for each age class.
If no life table exists, this function will process a dataframe including the age ranges of
individuals or groups of individuals to discrete the age classes. The age range is spread to
single years. <b>agebeg</b> has to be specified for the beginning of an age range, as well
as <b>ageend</b> for the end of an age range. If a data-set with year-known individuals is
used, <b>ageend</b> can be omitted but then the parameter <b>agerange</b> has to left on its
default value (<code>included</code>). The <b>method</b> defines in which way the single years between
the different age classes are split. If the data set comprises a grouping variable (e.g., sex),
this can be specified with <b>group</b>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prep.life.table</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  dec <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  <span class="va">agebeg</span>,</span>
<span>  ageend <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"Standard"</span>,</span>
<span>  agerange <span class="op">=</span> <span class="st">"included"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>single dataframe containing sex age and quantity of deceased (individuals or group of individuals).</p></dd>


<dt id="arg-dec">dec<a class="anchor" aria-label="anchor" href="#arg-dec"></a></dt>
<dd><p>column name (as character) of the count of deceased, optional.</p></dd>


<dt id="arg-agebeg">agebeg<a class="anchor" aria-label="anchor" href="#arg-agebeg"></a></dt>
<dd><p>column name (as character) for the beginning of an age range.</p></dd>


<dt id="arg-ageend">ageend<a class="anchor" aria-label="anchor" href="#arg-ageend"></a></dt>
<dd><p>column name (as character) for the end of an age range, optional.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>column name (as character) of the grouping field (e.g., sex),
optional. Default setup is: <code>NA</code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>character string, optional. Default options is <code>Standard</code>, which will create age
classes beginning with 1 year, up to 4 years, followed by steps of 5 years (1,4,5,5,...) until the
maximum age is reached. <code>Equal5</code> will create age classes with an even distribution, stepped
by 5 years (5,5,...) until the maximum age is reached. If method is a single numeric, this number will be
repeated until the maximum age is reached. Thereby, it is possible to create a year-wise life table.</p></dd>


<dt id="arg-agerange">agerange<a class="anchor" aria-label="anchor" href="#arg-agerange"></a></dt>
<dd><p>character string, optional. Default setup is: <code>included</code>.
If the age ranges from "20 to 40" and "40 to 60", <code>excluded</code> will exclude the year 40 from "20 to 40",
to prevent overlapping age classes. <code>included</code> is for age ranges like "20 to 39"
where the year 39 is meant to be counted.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of input parameter needed for the function <code>life.table</code>.</p>
<ul><li><p><b>x</b> or <b>Age</b>:  age interval.</p></li>
<li><p><b>a</b>:  years within x.</p></li>
<li><p><b>Dx</b>: number of deaths within <b>x</b>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Separate age ranges in your data set.</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html" class="external-link">separate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/replace.html" class="external-link">replace</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     <span class="va">magdalenenberg</span>,</span></span>
<span class="r-in"><span>     <span class="va">magdalenenberg</span><span class="op">==</span><span class="st">"60-x"</span>, <span class="st">"60-69"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="va">a</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"from"</span>, <span class="st">"to"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">from</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">to</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply prep.life.table to a data set containing the age ranges.</span></span></span>
<span class="r-in"><span><span class="va">magda_prep</span> <span class="op">&lt;-</span> <span class="fu">prep.life.table</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">df</span>,</span></span>
<span class="r-in"><span>  dec <span class="op">=</span> <span class="st">"Dx"</span>,</span></span>
<span class="r-in"><span>  agebeg <span class="op">=</span> <span class="st">"from"</span>,</span></span>
<span class="r-in"><span>  ageend <span class="op">=</span> <span class="st">"to"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"Equal5"</span>,</span></span>
<span class="r-in"><span>  agerange <span class="op">=</span> <span class="st">"included"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a life.table.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="life.table.html">life.table</a></span><span class="op">(</span><span class="va">magda_prep</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	 mortAAR life table (n = 111 individuals)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Life expectancy at birth (e0): 32.196</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         x a    Ax    Dx     dx      lx      qx      Lx       Tx     ex rel_popx</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0--4 5 1.667  3.79  3.414 100.000   3.414 488.619 3219.632 32.196   15.176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    5--9 5 2.500  4.62  4.162  96.586   4.309 472.523 2731.014 28.276   14.676</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  10--14 5 2.500  4.54  4.090  92.423   4.425 451.892 2258.491 24.436   14.036</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  15--19 5 2.500  4.21  3.793  88.333   4.294 432.185 1806.599 20.452   13.423</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  20--24 5 2.500 14.99 13.505  84.541  15.974 388.941 1374.414 16.257   12.080</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  25--29 5 2.500 20.61 18.568  71.036  26.138 308.761  985.473 13.873    9.590</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  30--34 5 2.500 17.20 15.495  52.468  29.533 223.604  676.712 12.897    6.945</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  35--39 5 2.500 14.39 12.964  36.973  35.063 152.455  453.108 12.255    4.735</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  40--44 5 2.500  6.68  6.018  24.009  25.066 105.000  300.653 12.523    3.261</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 45--49 5 2.500  4.04  3.640  17.991  20.230  80.856  195.653 10.875    2.511</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 50--54 5 2.500  5.49  4.946  14.351  34.463  59.392  114.797  7.999    1.845</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 55--59 5 2.500  5.72  5.153   9.405  54.789  34.144   55.405  5.891    1.060</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 60--64 5 2.500  2.36  2.126   4.252  50.000  15.946   21.261  5.000    0.495</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 65--69 5 2.500  2.36  2.126   2.126 100.000   5.315    5.315  2.500    0.165 </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nils Mueller-Scheessel, Martin Hinz, Clemens Schmid, Christoph Rinne, Daniel Knitter, Wolfgang Hamer, Dirk Seidensticker, Franziska Faupel, Carolin Tietze, Nicole Grunert.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

